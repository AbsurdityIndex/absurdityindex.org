---
import Icon from '../ui/Icon.astro';

interface Props {
  status: string;
  billNumber: string;
}

const { status } = Astro.props;

const COST_PER_HOUR = 79158;

function estimateHours(status: string): number {
  const s = status.toLowerCase();
  if (s.includes('signed into law') || s.includes('became law')) return 24;
  if (s.includes('passed house') || s.includes('passed senate') || s.includes('passed both'))
    return 16;
  if (s.includes('reported')) return 8;
  if (s.includes('died')) return 4;
  return 2; // referred to committee or introduced
}

const hours = estimateHours(status);
const cost = hours * COST_PER_HOUR;
const formatted = cost.toLocaleString('en-US', {
  style: 'currency',
  currency: 'USD',
  maximumFractionDigits: 0,
});
---

<div class="bg-cream-100 border border-gold-300 rounded-lg p-5 h-full">
  <div class="flex items-center gap-2 mb-3">
    <div class="w-8 h-8 rounded-full bg-gold-100 flex items-center justify-center">
      <Icon name="dollar-sign" size={16} class="text-gold-700" />
    </div>
    <h4 class="font-serif font-bold text-navy-900 text-sm">Estimated Taxpayer Cost</h4>
  </div>
  <p class="font-mono text-2xl font-bold text-navy-900">{formatted}</p>
  <p class="text-xs text-navy-600 mt-2">
    ~{hours} hours of congressional session time at $79,158/hour
  </p>
  <p class="text-xs text-navy-400 mt-1">
    (535 members ร $174k salary รท 147 session days รท 8 hours)
  </p>
  <p class="text-xs text-navy-400 italic mt-3 pt-3 border-t border-gold-200">
    Simplified estimate based on salary costs only. Actual costs include staff, facilities, and lost
    productivity.
  </p>
</div>
